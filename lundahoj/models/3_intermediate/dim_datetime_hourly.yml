version: 2

models:
  - name: dim_datetime_hourly
    description: "Hourly time spine with both UTC and Lund-local (Europe/Copenhagen) calendar fields. Used to align all facts and handle DST-aware time logic."
    columns:
      - name: date_hour_utc
        description: "Canonical UTC timestamp at hour grain. Primary join key for all hourly models."
        tests: [not_null, unique]

      # --- UTC fields ---
      - name: date_utc
        description: "UTC calendar date."
      - name: year_utc
        description: "Year in UTC."
      - name: month_utc
        description: "Month number in UTC."
      - name: dow_iso_utc
        description: "ISO day of week (1=Mon..7=Sun) in UTC."
      - name: iso_week_utc
        description: "ISO week number in UTC."
      - name: hour_of_day_utc
        description: "Hour of day [0–23] in UTC."

      # --- Lund (local) fields ---
      - name: date_lund
        description: "Calendar date in local Lund time (Europe/Copenhagen zone). DST-aware."
      - name: year_lund
        description: "Year in local time."
      - name: month_lund
        description: "Month number in local time."
      - name: dow_iso_lund
        description: "ISO day of week (1=Mon..7=Sun) in local time."
      - name: iso_week_lund
        description: "ISO week number in local time."
      - name: hour_of_day_lund
        description: "Hour of day [0–23] in local time (DST-adjusted)."
      - name: is_weekend_lund
        description: "Boolean flag indicating if the hour falls on a weekend (local time)."
      - name: is_rush_hour_lund
        description: "Boolean flag for local rush-hour periods (07–09, 15–18 local time)."